{{extend 'layout.html'}}

<gongos-navbar v-cloak key="navbar"></gongos-navbar>
<gongos-hero v-cloak key="hero" :hero-class="heroClass" :title="title" :subtitle="subtitle" :is-loading="isLoading" @get-data="getData">
</gongos-hero>


<section v-show="isLoading || cards.length > 0" class="main-content" key="main-content">
    <div class="container is-fluid">
        <transition-group name="slide-fade" key="loading-trans">
            <div v-show="isLoading" class="hero is-dark is-radiusless" key="loading-content">
                <div class="hero-body">
                    <div class="container">
                        <progress class="progress is-large is-danger" :value="loadCompleted" max="100">{% loadCompleted %}</progress>
                    </div>
                </div>
            </div>
            <div v-show="!isLoading" class="columns is-multiline" key="card-content">
                <gongos-card :card-title="card.title" :card-size="card.size" v-for="(card, index) in cards" :key="'card_' + index">
                    <template>
                        <chart :auto-resize="true" :options="card.chartType" ref="chart"></chart>
                    </template>
                </gongos-card>
            </div>
        </transition-group>
    </div>
</section>

{{block component_js}}
<!-- nav -->
<script type="text/babel" data-presets="es2015,stage-2" src="{{=URL('static','js/app/components/gongos-navbar.js')}}"></script>
<!-- hero -->
<script type="text/babel" data-presets="es2015,stage-2" src="{{=URL('static','js/app/components/gongos-hero.js')}}"></script>
<!-- content -->
<script type="text/babel" data-presets="es2015,stage-2" src="{{=URL('static','js/app/components/gongos-content.js')}}"></script>
<!-- card -->
<script type="text/babel" data-presets="es2015,stage-2" src="{{=URL('static','js/app/components/gongos-card.js')}}"></script>
<!-- charts -->
<script type="text/babel" data-presets="es2015,stage-2" src="{{=URL('static','js/app/components/gongos-charts.js')}}"></script>
{{end}}
